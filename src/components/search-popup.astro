
  <div id="searchModal" class="fixed top-[75px] inset-0 bg-white/90 dark:bg-black/10 hidden z-20 flex items-start justify-center pt-10 px-7">
    <div class="w-full max-w-md rounded-xl shadow-lg relative">

      <!-- Search Input Group -->
      <div class="relative">
        <input 
          type="text" 
          id="searchInput" 
          placeholder="Type a font name..." 
          class="w-full px-4 pr-10 py-2 border border-dashed border-neutral-300 rounded-xl focus:outline-none focus:ring-1 focus:ring-neutral-500 shadow-sm"
          autocomplete="off"
        />
        <!-- Clear button (X) -->
        <button 
          id="clearBtn" 
          class="absolute right-4 top-2 text-gray-400 hover:text-gray-600 focus:outline-none hidden"
        >
          âœ•
        </button>
      </div>

      <!-- Search Results -->
      <div 
        id="results" 
        class="mt-4 max-h-[400px] overflow-y-auto bg-white dark:bg-black border border-dashed border-neutral-300 rounded-xl shadow-sm hidden absolute w-full z-20 py-1"
      ></div>

    </div>
  </div>


<script is:inline>
    const openSearch = document.querySelectorAll('.openSearch');
    const searchModal = document.getElementById('searchModal');
    const searchInput = document.getElementById('searchInput');
    const resultsContainer = document.getElementById('results');
    const clearBtn = document.getElementById('clearBtn');
    let fonts = [];

    // Fetch font data
    fetch('https://cdn.jsdelivr.net/gh/fuadhasanshihab/bangla-web-fonts@main/src/collections/fonts.json')
      .then(res => res.json())
      .then(data => fonts = data);

    // Show filtered or all results
    function displayResults(fontArray, query) {
      resultsContainer.innerHTML = '';
      resultsContainer.classList.remove('hidden');

      if (fontArray.length > 0) {
        fontArray.forEach(font => {
          const div = document.createElement('div');
          div.className = 'px-4 py-1 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-900';

          const regex = new RegExp(`(${query})`, 'gi');
          const highlighted = font.FontName.replace(regex, match => `<span class="font-bold text-blue-600">${match}</span>`);
          div.innerHTML = highlighted;

          div.onclick = () => {
            window.location.href = `https://banglawebfonts.pages.dev/${font.FontPath}/`;
          };

          resultsContainer.appendChild(div);
        });
      } else if (query.trim()) {
        const noMatch = document.createElement('div');
        noMatch.className = 'px-4 py-2 text-gray-500 italic';
        noMatch.textContent = `No results found for "${query}"`;
        resultsContainer.appendChild(noMatch);
      } else {
        resultsContainer.classList.add('hidden');
      }
    }

    // Input logic
    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase();
      clearBtn.classList.toggle('hidden', query.length === 0);
      if (query.length === 0) {
        displayResults(fonts, '');
      } else {
        const filtered = fonts.filter(font =>
          font.FontName.toLowerCase().includes(query)
        );
        displayResults(filtered, searchInput.value);
      }
    });

    // Show results on focus
    searchInput.addEventListener('focus', () => {
      if (searchInput.value.trim() === '') {
        displayResults(fonts, '');
      }
    });

    // Clear input
    clearBtn.addEventListener('click', () => {
      searchInput.value = '';
      clearBtn.classList.add('hidden');
      displayResults(fonts, '');
      searchInput.focus();
    });

    // Open modal
openSearch.forEach(el => {
  el.addEventListener('click', () => {
    searchModal.classList.remove('hidden');
    document.body.classList.add('overflow-hidden');
    setTimeout(() => searchInput.focus(), 150);
  });
});


// Close modal if clicked on background
searchModal.addEventListener('click', (e) => {
  if (e.target === searchModal) {
    searchModal.classList.add('hidden');
    resultsContainer.classList.add('hidden');
    document.body.classList.remove('overflow-hidden'); // restore body scroll
  }
});

// Close modal on ESC
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    searchModal.classList.add('hidden');
    resultsContainer.classList.add('hidden');
    document.body.classList.remove('overflow-hidden');
  }
});

  </script>
